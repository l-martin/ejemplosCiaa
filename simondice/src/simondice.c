/*============================================================================
 * Licencia:
 * Autor: Leguizamon
 * Fecha:
 *===========================================================================*/

/*==================[inlcusiones]============================================*/

#include "sapi.h"        // <= Biblioteca sAPI
#include<stdio.h>
#include<math.h>


/*==================[definiciones de datos internos]=========================*/

CONSOLE_PRINT_ENABLE

void CargarSecuencia(void); 	//funcion que carga el vector secuencia de 10 posiciones
void menuCargarSecuencia(void); //funcion que presenta el menu de carga del vector
void bienvenido(void);	//funcion que muestra un mensaje de bienvenida
void comienzo(void);	//funcion que reproduce la secuencia de leds y compara con el switch presionado
void LEDganapierde(void);    //prende los led verde o rojo segun gana o pierde
void pulgar(void);  //Dibuja un pulgar
void pierde(void); //Dibuja una calavera
void clearscr(void);    //Borra pantalla
uint8_t secuencia[10];	//vector en el cual se cargara la secuencia
static bool_t State = OFF;	//variable global que me indica el estado de los leds
static bool_t led = OFF;	//variable global que me indica el estado de los leds
uint8_t menu=0;	//variable global que indica en que parte del programa se encuentra el usuario
uint8_t datos[]="0 ->0 ->0 ->0 ->0 ->0 ->0 ->0 ->0 ->0   ";	//vector que muestra en pantalla los datos que se van cargando en la secuencia
static uint8_t y=0; //vairable global que indica la pocision del vector para comparar luz y switch
/*==================[declaraciones de funciones internas]====================*/


void clearscr()
{
uartWriteByte( UART_USB, 27 ); // ESC command
uartWriteString( UART_USB, "[2J" ); // Clear screen command
uartWriteByte( UART_USB, 27 ); // ESC command
uartWriteString( UART_USB, "[H" ); // Cursor to home command
delay(1); // Pequeño delay para que permita mostrar nuevos mensajes
}

//--------------------------Dibuja un pulgar ----------------------------------

void pierde()
{
char perdio[]={176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,178,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,219,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,178,219,219,219,219,219,178,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,219,219,219,219,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,219,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,178,219,219,219,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,219,219,178,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,219,219,177,176,219,219,178,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,178,176,177,219,219,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,177,176,219,219,176,176,176,176,176,177,177,178,219,219,219,177,176,176,176,176,176,176,176,177,219,219,219,178,177,177,176,176,176,176,176,219,219,176,178,219,219,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,219,219,176,176,219,219,219,219,219,219,219,219,219,219,177,176,176,176,176,176,178,219,219,219,219,219,219,219,219,219,219,176,176,219,219,177,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,219,176,219,219,219,219,219,219,219,219,219,219,219,219,176,176,176,176,176,219,219,219,219,219,219,219,219,219,219,219,219,176,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,176,177,219,219,219,219,219,219,219,219,219,219,176,176,176,176,176,176,176,219,219,219,219,219,219,219,219,219,219,177,176,219,219,177,176,176,176,176,176,176,176,176,176,177,176,176,176,176,176,'\n','\r',176,176,176,176,177,219,219,219,219,176,176,176,176,176,176,176,178,219,177,176,176,219,219,219,219,219,219,219,219,219,176,176,176,176,176,176,176,176,176,219,219,219,219,219,219,219,219,219,176,176,177,219,178,176,176,176,176,176,176,178,219,219,219,219,176,176,176,176,'\n','\r',176,176,176,176,219,219,176,177,219,219,177,176,176,176,176,176,219,219,176,176,176,176,219,219,219,219,219,219,178,176,176,176,176,219,176,219,176,176,176,176,219,219,219,219,219,219,219,176,176,176,176,219,219,176,176,176,176,176,219,219,219,176,176,219,219,176,176,176,'\n','\r',176,176,176,176,219,219,176,176,176,219,219,178,176,176,176,176,219,219,176,176,176,176,176,176,177,178,178,176,176,176,176,177,219,219,176,219,219,176,176,176,176,176,178,178,177,176,176,176,176,176,177,219,219,176,176,176,176,219,219,219,176,176,176,219,219,176,176,176,'\n','\r',176,176,178,219,219,177,176,176,176,176,219,219,219,219,178,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,219,219,219,176,176,176,176,178,219,219,177,176,'\n','\r',176,219,219,178,176,176,176,176,176,176,176,176,177,219,219,219,219,219,219,219,219,178,176,176,176,176,176,176,176,176,219,219,219,219,176,219,219,219,178,176,176,176,176,176,176,176,177,178,219,219,219,219,219,219,219,219,176,176,176,176,176,176,176,176,176,219,219,219,'\n','\r',176,219,219,178,177,178,219,219,219,178,176,176,176,176,176,176,178,219,219,219,219,219,219,219,219,178,176,176,176,176,219,219,219,219,176,219,219,219,178,176,176,176,176,178,219,219,219,219,219,219,219,219,178,176,176,176,176,176,176,219,219,219,219,178,178,219,219,219,'\n','\r',176,176,219,219,219,219,219,219,219,219,219,219,219,177,176,176,176,176,176,176,219,219,219,219,219,219,219,176,176,176,176,219,219,176,176,176,219,219,176,176,176,176,219,219,219,219,219,219,178,176,176,176,176,176,176,178,219,219,219,219,219,219,219,219,219,219,219,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,178,219,219,219,219,219,176,176,176,176,219,219,178,178,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,219,177,219,219,176,176,176,177,219,219,219,219,219,178,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,219,219,219,177,177,219,178,219,176,219,219,219,178,178,177,177,177,178,177,177,178,178,178,219,219,219,177,219,219,219,176,178,219,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,219,219,177,178,219,177,177,219,176,219,177,219,176,219,176,219,178,219,177,219,178,176,219,176,219,219,219,219,219,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,219,219,178,219,178,219,178,219,177,219,177,219,178,219,178,219,219,219,219,176,178,219,178,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,178,219,219,219,219,178,176,178,219,178,219,176,219,177,219,176,219,176,219,177,219,177,219,219,219,177,176,219,219,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,178,219,219,219,219,219,176,176,219,219,176,176,176,177,219,219,219,219,219,178,219,178,219,219,219,219,219,177,176,176,176,219,219,176,177,219,219,219,219,219,178,176,176,176,176,176,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,177,219,219,219,219,219,219,219,219,219,219,178,176,176,176,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,177,176,176,176,176,176,178,219,219,219,219,219,219,219,219,219,219,177,176,176,176,176,'\n','\r',176,176,176,176,176,219,219,176,176,176,178,178,178,176,176,176,176,176,176,177,219,219,219,219,219,219,178,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,219,219,219,219,177,176,176,176,176,176,176,178,178,177,176,176,177,219,219,176,176,176,176,'\n','\r',176,176,176,176,176,178,219,219,176,176,176,176,176,176,176,176,178,219,219,219,219,178,176,176,176,219,219,219,219,219,177,176,176,176,176,176,176,177,178,219,219,219,219,219,176,176,176,178,219,219,219,219,178,176,176,176,176,176,176,176,177,219,219,178,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,219,219,219,176,176,176,176,219,219,219,219,177,176,176,176,176,176,176,176,176,178,219,219,219,219,219,219,219,219,219,219,219,219,219,177,176,176,176,176,176,176,176,176,177,219,219,219,219,176,176,176,176,219,219,219,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,219,219,176,176,176,219,219,177,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,178,219,219,176,176,176,219,219,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,219,219,177,178,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,177,219,219,177,178,219,219,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,219,176,176,176,176,176,176,176,176,'\n','\r',176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,'\0','\n','\r'};
clearscr();
uartWriteString(UART_USB,perdio);
delay(800);
}

void pulgar()
{
char gano[]={175,176,176,176,176,176,176,176,176,176,176,176,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,219,219,219,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,219,219,176,176,176,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,219,219,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,176,176,219,219,176,175,176,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,219,219,219,219,219,219,219,176,176,176,176,176,176,176,219,219,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,219,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,219,176,219,219,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,219,219,176,176,176,176,176,219,219,219,219,176,176,176,176,176,176,176,176,176,176,219,219,219,219,219,219,176,176,176,176,176,175,'\n','\r',175,176,176,176,219,219,176,176,219,219,219,219,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,175,'\n','\r',175,176,176,176,219,219,176,176,176,176,176,176,176,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,175,'\n','\r',175,176,176,176,176,219,219,219,219,219,219,219,219,219,219,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,175,'\n','\r',175,176,176,176,176,219,219,176,176,176,176,176,176,176,176,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,175,'\n','\r',175,176,176,176,176,219,219,219,219,219,219,219,219,219,219,219,176,176,219,219,176,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,219,219,176,176,176,176,176,176,176,219,219,219,219,176,176,176,176,176,219,219,219,219,219,219,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,219,219,219,219,219,219,219,219,219,219,176,219,219,176,176,176,176,219,219,219,176,219,219,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,219,219,176,176,176,176,176,219,219,219,219,176,219,219,219,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,219,219,219,219,219,219,219,219,219,219,219,219,219,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\n','\r',175,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,176,175,'\0','\n','\r'};
clearscr();
uartWriteString(UART_USB,gano);
}


//--------------------------Prende los led verde o rojo segun gana o pierde----------------------------------
void LEDganapierde()
{y=0;
    if(menu==6)
        {led=ON;
        gpioWrite( LEDG, ON );
        gpioWrite( LED1, OFF );
        gpioWrite( LED2, OFF );
        gpioWrite( LED3, OFF );
        }
    if(menu==5)
        {led=ON;
        gpioWrite( LEDR, ON );
        gpioWrite( LED1, OFF );
        gpioWrite( LED2, OFF );
        gpioWrite( LED3, OFF );
        }
}


//--------------------------funcion que reproduce la secuencia de leds y compara con el switch presionado------------------
void comienzo(void)
{
clearscr();
while(menu==3);
while(menu==4 && y<10)	//si menu = 4, la funcion myTickHook activa los leds en la secuencia indicada por el vector "secuencia"
{
if(!gpioRead( TEC1 ))   //Si presiona la tecla entra y compara si fue la tecla correcta
    {delay(250);
        if(secuencia[y]=='a')
        {
        pulgar();
        consolePrintlnString("\n   CONTINUA!!");
        }
        else
        {menu=5;
        LEDganapierde();
        pierde();
        break;}
    }
if(!gpioRead( TEC2 ))   //Si presiona la tecla entra y compara si fue la tecla correcta
    {delay(250);
        if(secuencia[y]=='1')
        {
        pulgar();
        consolePrintlnString("\n   CONTINUA!!");
        }
        else
        {menu=5;
        LEDganapierde();
        pierde();
        break;}
    }
if(!gpioRead( TEC3 ))   //Si presiona la tecla entra y compara si fue la tecla correcta
    {delay(250);
        if(secuencia[y]=='2')
        {
        pulgar();
        consolePrintlnString("\n   CONTINUA!!");
        }
        else
        {menu=5;
        LEDganapierde();
        pierde();
        break;}
    }
if(!gpioRead( TEC4 ))   //Si presiona la tecla entra y compara si fue la tecla correcta
    {delay(250);
        if(secuencia[y]=='3')
        {
        pulgar();
        consolePrintlnString("\n   CONTINUA!!");
        }
        else
        {menu=5;
        LEDganapierde();
        pierde();
        break;}
    }
}
if(y==10 && menu==4)
{menu=6;
LEDganapierde();
}
}


//--------------------------------funcion que carga el vector secuencia de 10 posiciones---------------------------------

void CargarSecuencia()
{
uint8_t dataUart=0;
uint8_t x=0;
menuCargarSecuencia();
do{
    //ingresa la secuencia de datos
if(uartReadByte( UART_USB, &dataUart ))
    {//vuelve a la pantalla anterior
        if(dataUart=='q')
        {   menu=0;
            x=0;
            bienvenido();
            menuCargarSecuencia();
        }

        // Chequea que el valor ingresado por el usuario sea valido para el juego.
    if (dataUart == 'a' || dataUart == '1' || dataUart == '2' || dataUart == '3')
        {//Asigna el dato ingresado a la pocision correspondiente.
        secuencia[x] = dataUart;
        datos[x*4]=secuencia[x]; //carga el vector que se mostrara en pantalla con los datos separados por ->
        x++;
        }
    else
        {
        uartWriteString(UART_USB,"\r Error de asignacion: Datos validos  a, 1, 2 o 3.               \r");
        delay(500);
        }
}
}while(x<=9);
menu=3;
}

//-----------------------------------funcion que presenta el menu de carga del vector-----------------------------
void menuCargarSecuencia(void)
{
clearscr();
consolePrintlnString(" ---------------------------------------------------------------------------");
consolePrintlnString("|                                                                           |");
consolePrintlnString("|     CARGAR UNA SECUENCIA DE CODIGOS PARA QUE EL JUGADOR LAS REPITA        |");
consolePrintlnString("|     UTILIZANDO LAS TECLAS DE LA PLACA EDU-CIA - T1 - T2 - T3 - T4         |");
consolePrintlnString("|     SE ENCENDERAN LOS LEDS CORRESPONDIENTES LEDB - LED1 - LED2 - LED3     |")
consolePrintlnString(" ---------------------------------------------------------------------------");
consolePrintlnString("\n");
consolePrintlnString("PRESIONAR:\n\n");
consolePrintlnString("             ->  a : LEDB");
consolePrintlnString("             ->  1 : LED1");
consolePrintlnString("             ->  2 : LED2");
consolePrintlnString("             ->  3 : LED3");
consolePrintlnString("\n\n");
consolePrintlnString("-------------------------------------------------------------------------------");
consolePrintlnString("||        SECUENCIA                 ||                   ||   MENU     ||      ");
consolePrintlnString("-------------------------------------------------------------------------------");
}


	//funcion que muestra un mensaje de bienvenida
void bienvenido()
{
uint8_t dataUart=0;
clearscr();
consolePrintlnString("   _____   _____   __  __    ____    _   _     _____    _____    _____   ______ ");
consolePrintlnString("  / ____| |_   _| |  \\/  |  / __ \\  | \\ | |   |  __ \\  |_   _|  / ____| |  ____|");
consolePrintlnString(" | (___     | |   | \\  / | | |  | | |  \\| |   | |  | |   | |   | |      | |__   ");
consolePrintlnString("  \\___ \\    | |   | |\\/| | | |  | | | . ` |   | |  | |   | |   | |      |  __|  ");
consolePrintlnString("  ____) |  _| |_  | |  | | | |__| | | |\\  |   | |__| |  _| |_  | |____  | |____ ");
consolePrintlnString(" |_____/  |_____| |_|  |_|  \\____/  |_| \\_|   |_____/  |_____|  \\_____| |______|");
consolePrintlnString("              _ _    _____   _____                         _ _                  ");
consolePrintlnString("             ( | )  / ____| |_   _|     /\\         /\\     ( | )                 ");
consolePrintlnString("              V V  | |        | |      /  \\       /  \\     V V                  ");
consolePrintlnString("                   | |        | |     / /\\ \\     / /\\ \\                         ");
consolePrintlnString("                   | |____   _| |_   / ____ \\   / ____ \\                        ");
consolePrintlnString("                    \\_____| |_____| /_/    \\_\\ /_/    \\_\\       		          ");
consolePrintlnString("\n\n\n\n\r");
dataUart = cos(dataUart);
uartWriteString(UART_USB,dataUart);
while(!uartReadByte( UART_USB, &dataUart )); //loop hasta que presione una tecla..
menu=2;

}


/* FUNCION que se ejecuta cada vez que ocurre un Tick. */
bool_t myTickHook( void *ptr )
{   static uint32_t tiempo;
    static uint8_t veces;
    tiempo++;	//cuenta las veces que el timer interrumpe cada vez al tiempo seteado

    if(menu==0)
        {if(tiempo==10)
            {if(State)
                {   State = OFF;
                    uartWriteString(UART_USB,"     --->    Presione cualquier tecla para comenzar .. \r");
                    tiempo=0;
                }
            else
                {   State = ON;
                    uartWriteString(UART_USB,"             Presione cualquier tecla para comenzar ...\r");
                    tiempo=0;
                }
            }
        }

    if(menu==2)
        {   veces=0;
            if(tiempo==10)
            {if(State)
                {   State = OFF;
                    uartWriteString(UART_USB,datos);
                    uartWriteString(UART_USB,"                      q = Salir \r");
                    tiempo=0;
                }
            else
                {   State = ON;
                    uartWriteString(UART_USB,datos);
                    uartWriteString(UART_USB,"                                \r");
                    tiempo=0;
                }
            }
        }
    if(menu==3)
       {if(tiempo>5)
           {if(led)
               {led = OFF;
                gpioToggle (LEDB);
                gpioToggle (LED1);
                gpioToggle (LED2);
                gpioToggle (LED3);
                tiempo=0;
                }
            else if(veces<4)
                {led = ON;
                gpioToggle (LEDB);
                gpioToggle (LED1);
                gpioToggle (LED2);
                gpioToggle (LED3);
                tiempo=0;
                veces++;
                consolePrintInt(veces);
                }
            else if(veces==4)
                {menu=4;
                 veces=0;
                }
            }

        }

    if(menu==4)
       {
        if(tiempo>20)
           {if(led)
               {led = OFF;
                if (secuencia[y] == 'a')
                    {gpioToggle (LEDB);
                    tiempo=0;
                    }
                if (secuencia[y] == '1')
                    {gpioToggle (LED1);
                    tiempo=0;
                    }
                if (secuencia[y] == '2')
                    {gpioToggle (LED2);
                    tiempo=0;
                    }
                if (secuencia[y] == '3')
                    {gpioToggle (LED3);
                    tiempo=0;
                    }
                y++;
                }
            else
                {led = ON;
                if (secuencia[y] == 'a')
                    {gpioToggle (LEDB);
                    tiempo=0;
                    }
                if (secuencia[y] == '1')
                    {gpioToggle (LED1);
                    tiempo=0;
                    }
                if (secuencia[y] == '2')
                    {gpioToggle (LED2);
                    tiempo=0;
                    }
                if (secuencia[y] == '3')
                    {gpioToggle (LED3);
                    tiempo=0;
                    }

                }
            }
        }

        if(menu==5)
            {if(tiempo==60)
                {if(led)
                    {led = OFF;
                    menu=0;
                    gpioToggle (LEDR);
                    tiempo=0;
                    }
                else
                    {led = ON;

                    gpioToggle (LEDR);
                    tiempo=0;
                    }


                }
            }
        if(menu==6)
            {if(tiempo==60)
                {if(led)
                    {led = OFF;
                    menu=0;
                    gpioToggle (LEDG);
                    tiempo=0;
                    }
                else
                    {led = ON;

                    gpioToggle (LEDG);
                    tiempo=0;
                    }


                }
            }


 return 1;}

/*==================[declaraciones de funciones externas]====================*/

/*==================[funcion principal]======================================*/

/* FUNCION PRINCIPAL, PUNTO DE ENTRADA AL PROGRAMA LUEGO DE RESET. */
int main(void){
    //variables usadas en main
    uint8_t dataUart;

   /* ------------- INICIALIZACIONES ------------- */

   /* Inicializar la placa */
    boardConfig();
    // Inicializar UART_USB como salida de consola
    consolePrintConfigUart( UART_USB, 115200 );

     /* Inicializar el conteo de Ticks con resolucion de 50ms (se ejecuta
      periódicamente una interrupcón cada 50ms que incrementa un contador de
      Ticks obteniendose una base de tiempos). Se agrega además un "tick hook"
      nombrado myTickHook. El tick hook es simplemente una función que se
      ejecutará períodicamente con cada interrupción de Tick, este nombre se
      refiere a una función "enganchada" a una interrupción */
   tickConfig( 50, myTickHook );

   /* ------------- REPETIR POR SIEMPRE ------------- */
   while(1)
{

bienvenido();
CargarSecuencia();
comienzo();

}

   /* NO DEBE LLEGAR NUNCA AQUI, debido a que a este programa no es llamado
      por ningun S.O. */
   return 0 ;
}


/*==================[fin del archivo]========================================*/
